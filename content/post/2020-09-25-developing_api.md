---
title: Webアプリケーション バックエンド RESTfulAPI開発
date: 2020-09-25
---

## 実装

- ルーティング
- リクエストパーサーによる値の受け取り
- ビジネスロジックの実装
- 値のバリデーション
- 値の永続化(DB保存)
- 値の返答(JSON)

一般公開向けのAPIでなく、SPAのための社内のみで使うRESTfulAPIなどは、フロントエンドエンジニアにとっては、「値とHTTPリクエストを送れば適切なJSONを返してくれ、データ永続化などに関してはうまくやっていてくれている」ものであることを望んでおり、そのことを踏まえて、大きく上のようにAPI実装に対して必要な事項をわけました。実際は、認証や、DB設計など、もう少し踏み込んだ部分についても設計の考慮が必要なので、そちらについてもこの記事で扱っていきたいとは思っていますが、まずは、「リクエストからレスポンスまで」の一連の流れをどのように扱っていくか、開発のさいに考慮すべきかという点についてを考えたいと思います。

### ルーティング

エンドポイントの設計と、あるエンドポイントに送られてきたHTTPリクエストを解釈し、必要なモジュール(コントローラ)に対して受け渡す責務を負います。

後者については、ほとんどのライブラリでサポートされているので、そのライブラリが求める実装に乗ればいいでしょう。Railsの場合は、route.rbにまとめて記載すると思われます。

重要なのは、やはり前者、エンドポイントの設計でしょう。基本的なものはRESTful通りに作ればいいでしょうが、「固有のユースケース」などに対しては、エンドポイントも固有に作成することで対応するのが自分はいいと思っています。

たとえば、ユーザー検索のエンドポイントは

```
GET /users/search?name=mike
```

といったように、searchといった動詞をエンドポイントに含ませていいと思ってます。
また、社内用でもあるので、特定のエンドポイントが様々なユースケースに対応する形よりも、エンドポイント自体を多くしたほうが「現存のAPIでフロントが勝手なことしたからユーザーが消えちゃったよ！」みたいな事故が減る確率は上がるため、その点でもメリットが大きいです。
デメリットは、煩雑になることですかね。

